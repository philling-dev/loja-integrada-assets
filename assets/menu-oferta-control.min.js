document.addEventListener("DOMContentLoaded", () => {
  const menuItem = document.querySelector('li.item-oferta.bloquear-hover-oferta');
  const menuBtn = menuItem?.querySelector('a[title="menu-oferta"]');
  const submenu = menuItem?.querySelector('ul.oferta-nivel-dois');

  if (!menuItem || !menuBtn || !submenu) return;

  // Remove href para evitar redirecionamento
  menuBtn.removeAttribute('href');

  // Remove classe que abre no hover para controlar manualmente
  menuItem.classList.add('bloquear-hover-oferta');
  submenu.style.display = 'none';

  // Alterna submenu no clique
  menuBtn.addEventListener('click', (e) => {
    e.preventDefault();
    e.stopPropagation();

    if (submenu.style.display === 'block') {
      submenu.style.display = 'none';
      menuItem.classList.remove('ativo');
    } else {
      submenu.style.display = 'block';
      menuItem.classList.add('ativo');
    }
  });

  // Fecha submenu ao clicar fora
  document.addEventListener('click', (e) => {
    if (!menuItem.contains(e.target)) {
      submenu.style.display = 'none';
      menuItem.classList.remove('ativo');
    }
  });
});
